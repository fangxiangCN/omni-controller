# Omni Controller UI è®¾è®¡æ–‡æ¡£

## 1. è®¾è®¡ç›®æ ‡

å°† Midscene åˆ†æ•£çš„ UI ç»„ä»¶ï¼ˆReportã€Playgroundã€Recorderã€Chrome Extensionï¼‰æ•´åˆä¸ºä¸€ä¸ªç»Ÿä¸€çš„æ¡Œé¢å®¢æˆ·ç«¯ï¼Œæ”¯æŒå¤šè®¾å¤‡ç®¡ç†å’Œå®Œæ•´çš„ AI è‡ªåŠ¨åŒ–å·¥ä½œæµã€‚

## 2. æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 2.1 ç»Ÿä¸€æ€§
- éµå¾ª Midscene ç°æœ‰çš„è§†è§‰è®¾è®¡è¯­è¨€å’Œäº¤äº’æ¨¡å¼
- å¤ç”¨ `@midscene/visualizer` ç»„ä»¶åº“
- ä¿æŒæš—é»‘/æ˜äº®ä¸»é¢˜ä¸€è‡´æ€§

### 2.2 æ¨¡å—åŒ–
- å„åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ä½†å¯æ— ç¼åˆ‡æ¢
- æ”¯æŒæ’ä»¶åŒ–æ‰©å±•æ–°è®¾å¤‡ç±»å‹
- çŠ¶æ€ç®¡ç†æ¸…æ™°åˆ†ç¦»

### 2.3 æ•ˆç‡ä¼˜å…ˆ
- IDE å¼å¸ƒå±€ï¼Œæœ€å¤§åŒ–å·¥ä½œåŒº
- å¯æŠ˜å /å±•å¼€çš„ä¾§è¾¹æ 
- å¿«æ·é”®æ”¯æŒ

## 3. æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Omni Controller                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          â”‚                              â”‚                 â”‚  â”‚
â”‚  â”‚  Device  â”‚      Main Content Area       â”‚   Inspector     â”‚  â”‚
â”‚  â”‚  Panel   â”‚                              â”‚   Panel         â”‚  â”‚
â”‚  â”‚  (Left)  â”‚                              â”‚   (Right)       â”‚  â”‚
â”‚  â”‚          â”‚                              â”‚                 â”‚  â”‚
â”‚  â”‚  - Web   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  - Properties   â”‚  â”‚
â”‚  â”‚  - iOS   â”‚   â”‚                      â”‚   â”‚  - Timeline     â”‚  â”‚
â”‚  â”‚  - Andr  â”‚   â”‚   Workspace          â”‚   â”‚  - Details      â”‚  â”‚
â”‚  â”‚  - Comp  â”‚   â”‚                      â”‚   â”‚                 â”‚  â”‚
â”‚  â”‚          â”‚   â”‚   [Playground/       â”‚   â”‚                 â”‚  â”‚
â”‚  â”‚          â”‚   â”‚    Report/           â”‚   â”‚                 â”‚  â”‚
â”‚  â”‚          â”‚   â”‚    Recorder]         â”‚   â”‚                 â”‚  â”‚
â”‚  â”‚          â”‚   â”‚                      â”‚   â”‚                 â”‚  â”‚
â”‚  â”‚          â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                 â”‚  â”‚
â”‚  â”‚          â”‚                              â”‚                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Status Bar                                               â”‚ â”‚
â”‚  â”‚  - Connection Status | Device Info | Model | Task Count   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4. æ¨¡å—è¯¦ç»†è®¾è®¡

### 4.1 è®¾å¤‡é¢æ¿ï¼ˆDevice Panelï¼‰- å·¦ä¾§

**åŠŸèƒ½**ï¼šç®¡ç†å’Œåˆ‡æ¢ä¸åŒçš„è®¾å¤‡è¿æ¥

```typescript
interface DevicePanelProps {
  devices: Device[];
  activeDeviceId: string;
  onDeviceSelect: (deviceId: string) => void;
  onDeviceConnect: (device: DeviceConfig) => void;
  onDeviceDisconnect: (deviceId: string) => void;
}

type DeviceType = 'web' | 'android' | 'ios' | 'computer';

interface Device {
  id: string;
  name: string;
  type: DeviceType;
  status: 'connected' | 'disconnected' | 'connecting';
  metadata: {
    url?: string;           // Web
    udid?: string;          // iOS/Android
    model?: string;         // Device model
    osVersion?: string;     // OS version
    screenshot?: string;    // Last screenshot thumbnail
  };
}
```

**UI ç»„ä»¶**ï¼š
- è®¾å¤‡åˆ—è¡¨ï¼ˆå¯æŠ˜å åˆ†ç»„ï¼‰
- è®¾å¤‡çŠ¶æ€æŒ‡ç¤ºå™¨ï¼ˆåœ¨çº¿/ç¦»çº¿/è¿æ¥ä¸­ï¼‰
- å¿«é€Ÿæ“ä½œæŒ‰é’®ï¼ˆè¿æ¥/æ–­å¼€/æˆªå›¾ï¼‰
- è®¾å¤‡ç¼©ç•¥å›¾é¢„è§ˆ
- æ·»åŠ æ–°è®¾å¤‡æŒ‰é’®

**äº¤äº’**ï¼š
- ç‚¹å‡»è®¾å¤‡åˆ‡æ¢å½“å‰å·¥ä½œåŒº
- æ‹–æ‹½è°ƒæ•´é¢æ¿å®½åº¦
- å³é”®èœå•ï¼šé‡å‘½åã€é…ç½®ã€åˆ é™¤

### 4.2 ä¸»å·¥ä½œåŒºï¼ˆMain Workspaceï¼‰- ä¸­é—´

æ ¹æ®å½“å‰æ¨¡å¼æ˜¾ç¤ºä¸åŒå†…å®¹ï¼š

#### æ¨¡å¼ A: Playground æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
ç”¨äºä¸è®¾å¤‡è¿›è¡Œå¯¹è¯å¼äº¤äº’

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Toolbar                             â”‚
â”‚  [Env Config] [Clear] [Settings]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Chat Interface                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ User: ç‚¹å‡»ç™»å½•æŒ‰é’®           â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚ AI:   [æ‰§è¡Œä¸­...]            â”‚   â”‚
â”‚  â”‚       Screenshot result      â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚ User: è¾“å…¥ç”¨æˆ·å admin       â”‚   â”‚
â”‚  â”‚ ...                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [Input...]        [Send]     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¤ç”¨ç»„ä»¶**ï¼š
- `UniversalPlayground` - å¯¹è¯ç•Œé¢
- `PromptInput` - è¾“å…¥æ¡†
- `PlaygroundResult` - ç»“æœå±•ç¤º
- `ContextPreview` - ä¸Šä¸‹æ–‡é¢„è§ˆ

#### æ¨¡å¼ B: Report æ¨¡å¼
ç”¨äºæŸ¥çœ‹æ‰§è¡Œå†å²æŠ¥å‘Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Timeline                            â”‚
â”‚  â—‹â”€â”€â”€â—‹â”€â”€â”€â—â”€â”€â”€â—‹â”€â”€â”€â—‹                   â”‚
â”‚  ç‚¹å‡»  è¾“å…¥  æ–­è¨€  æ»šåŠ¨  å®Œæˆ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Detail Panel                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Screenshot                   â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚ [Highlighted Elements]       â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ AI Thought Process           â”‚   â”‚
â”‚  â”‚ Action: click                â”‚   â”‚
â”‚  â”‚ Target: Login Button         â”‚   â”‚
â”‚  â”‚ Reason: ...                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¤ç”¨ç»„ä»¶**ï¼š
- `Timeline` - æ—¶é—´çº¿
- `DetailPanel` - è¯¦æƒ…é¢æ¿
- `Player` - å›æ”¾æ’­æ”¾å™¨

#### æ¨¡å¼ C: Recorder æ¨¡å¼
ç”¨äºå½•åˆ¶å’Œç”Ÿæˆæµ‹è¯•è„šæœ¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Recording Controls                  â”‚
â”‚  [â— Record] [â¸ Pause] [â–  Stop]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Session List                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ Test Login Flow           â”‚   â”‚
â”‚  â”‚    12 actions | 2:34         â”‚   â”‚
â”‚  â”‚    [Play] [Export] [Edit]    â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚ ğŸ“ Search Product            â”‚   â”‚
â”‚  â”‚    8 actions | 1:45          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  Export Options                      â”‚
â”‚  [YAML] [Playwright] [Puppeteer]    â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¤ç”¨ç»„ä»¶**ï¼š
- `RecordList` - å½•åˆ¶åˆ—è¡¨
- `ProgressModal` - è¿›åº¦å¼¹çª—
- `SessionModals` - ä¼šè¯ç®¡ç†

### 4.3 æ£€æŸ¥å™¨é¢æ¿ï¼ˆInspector Panelï¼‰- å³ä¾§

**åŠŸèƒ½**ï¼šæ˜¾ç¤ºå½“å‰ä¸Šä¸‹æ–‡ä¿¡æ¯å’Œæ“ä½œè¯¦æƒ…

```typescript
interface InspectorPanelProps {
  mode: 'playground' | 'report' | 'recorder';
  context?: UIContext;
  selectedTask?: ExecutionTask;
  deviceInfo?: DeviceInfo;
}
```

**å†…å®¹æ ¹æ®æ¨¡å¼å˜åŒ–**ï¼š

**Playground æ¨¡å¼**ï¼š
- å½“å‰æˆªå›¾ï¼ˆå®æ—¶é¢„è§ˆï¼‰
- è®¾å¤‡ä¿¡æ¯ï¼ˆåˆ†è¾¨ç‡ã€DPIï¼‰
- æ¨¡å‹é…ç½®ï¼ˆå½“å‰ä½¿ç”¨çš„ AI æ¨¡å‹ï¼‰
- å¿«æ·æ“ä½œï¼ˆæˆªå›¾ã€åˆ·æ–°ï¼‰

**Report æ¨¡å¼**ï¼š
- ä»»åŠ¡è¯¦æƒ…ï¼ˆé€‰ä¸­çš„ä»»åŠ¡ï¼‰
- å…ƒç´ å®šä½ä¿¡æ¯
- AI å“åº”åŸå§‹æ•°æ®
- Token ä½¿ç”¨ç»Ÿè®¡

**Recorder æ¨¡å¼**ï¼š
- å½•åˆ¶çŠ¶æ€
- å½“å‰æ“ä½œè®¡æ•°
- ç”Ÿæˆçš„ä»£ç é¢„è§ˆ

### 4.4 çŠ¶æ€æ ï¼ˆStatus Barï¼‰- åº•éƒ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ Connected | iPhone 15 Pro | iOS 17.1 | 393Ã—852 @3x | GPT-4o â”‚
â”‚                                                 3 tasks pending â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ˜¾ç¤ºä¿¡æ¯**ï¼š
- è¿æ¥çŠ¶æ€ï¼ˆåœ¨çº¿/ç¦»çº¿ï¼‰
- å½“å‰è®¾å¤‡åç§°å’Œç±»å‹
- è®¾å¤‡è§„æ ¼ï¼ˆåˆ†è¾¨ç‡ã€OS ç‰ˆæœ¬ï¼‰
- å½“å‰ AI æ¨¡å‹
- å¾…å¤„ç†ä»»åŠ¡æ•°
- ç½‘ç»œå»¶è¿Ÿï¼ˆå¯é€‰ï¼‰

## 5. çŠ¶æ€ç®¡ç†è®¾è®¡

```typescript
// å…¨å±€çŠ¶æ€
interface OmniControllerState {
  // è®¾å¤‡ç®¡ç†
  devices: Device[];
  activeDeviceId: string | null;
  
  // è§†å›¾æ¨¡å¼
  mode: 'playground' | 'report' | 'recorder';
  
  // UI çŠ¶æ€
  sidebarCollapsed: boolean;
  inspectorCollapsed: boolean;
  theme: 'dark' | 'light';
  
  // Playground çŠ¶æ€
  playgroundState: PlaygroundState;
  
  // Report çŠ¶æ€
  selectedExecutionId: string | null;
  selectedTaskId: string | null;
  
  // Recorder çŠ¶æ€
  recordingState: RecordingState;
}

// ä½¿ç”¨ Zustand æˆ– Redux è¿›è¡ŒçŠ¶æ€ç®¡ç†
```

## 6. è·¯ç”±è®¾è®¡

```typescript
// ä½¿ç”¨ React Router æˆ–ç±»ä¼¼æ–¹æ¡ˆ
const routes = [
  {
    path: '/',
    element: <Layout />,
    children: [
      { path: 'playground/:deviceId', element: <PlaygroundView /> },
      { path: 'report/:executionId', element: <ReportView /> },
      { path: 'recorder', element: <RecorderView /> },
      { path: 'settings', element: <SettingsView /> },
    ],
  },
];
```

## 7. æŠ€æœ¯æ ˆ

- **Framework**: Electron + React + TypeScript
- **UI Library**: Ant Design (ä¸ Midscene ä¿æŒä¸€è‡´)
- **Component Library**: `@midscene/visualizer` (å¤ç”¨)
- **State Management**: Zustand
- **Styling**: Less + CSS Modules
- **Layout**: `react-resizable-panels`
- **Theme**: CSS Variables + Ant Design Theme

## 8. ç»„ä»¶å¤ç”¨æ¸…å•

### 8.1 ç›´æ¥å¤ç”¨ï¼ˆæ¥è‡ª @midscene/visualizerï¼‰
- âœ… `Logo`
- âœ… `UniversalPlayground`
- âœ… `ScreenshotViewer`
- âœ… `Player`
- âœ… `NavActions`
- âœ… `PromptInput`
- âœ… `PlaygroundResult`
- âœ… `ContextPreview`
- âœ… `ConfigSelector`
- âœ… `EnvConfig`
- âœ… `HistorySelector`
- âœ… `globalThemeConfig`
- âœ… `useGlobalPreference`

### 8.2 é€‚é…æ”¹é€ ï¼ˆæ¥è‡ª apps/reportï¼‰
- ğŸ”§ `Sidebar` â†’ é€šç”¨åŒ–è®¾å¤‡åˆ—è¡¨
- ğŸ”§ `Timeline` â†’ ä¿æŒç°æœ‰åŠŸèƒ½
- ğŸ”§ `DetailPanel` â†’ å¢å¼ºå¤šè®¾å¤‡æ”¯æŒ
- ğŸ”§ `DetailSide` â†’ æ•´åˆ Inspector

### 8.3 é€‚é…æ”¹é€ ï¼ˆæ¥è‡ª apps/chrome-extensionï¼‰
- ğŸ”§ `Recorder` â†’ é›†æˆåˆ°ä¸»ç•Œé¢
- ğŸ”§ `RecordList` â†’ ç»Ÿä¸€é£æ ¼
- ğŸ”§ `SessionModals` â†’ å¤ç”¨å¼¹çª—é€»è¾‘

## 9. æ–‡ä»¶ç»“æ„

```
omni-controller/
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ desktop-react/         # Electron ä¸»åº”ç”¨
â”‚       â”œâ”€â”€ electron/          # Electron main/preload/IPC
â”‚       â”œâ”€â”€ src/               # æ¸²æŸ“è¿›ç¨‹ (React)
â”‚       â”‚   â”œâ”€â”€ layout/
â”‚       â”‚   â”‚   â”œâ”€â”€ AppLayout.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ DevicePanel.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ InspectorPanel.tsx
â”‚       â”‚   â”‚   â””â”€â”€ StatusBar.tsx
â”‚       â”‚   â”œâ”€â”€ views/
â”‚       â”‚   â”‚   â”œâ”€â”€ PlaygroundView.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ ReportView.tsx
â”‚       â”‚   â”‚   â””â”€â”€ RecorderView.tsx
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ store/
â”‚       â”‚   â”œâ”€â”€ types/
â”‚       â”‚   â””â”€â”€ App.tsx
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ ui/                    # å…±äº« UI ç»„ä»¶ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ package.json
```

## 10. å¤šè®¾å¤‡ç®¡ç†è®¾è®¡

### 10.1 è®¾å¤‡è¿æ¥ç®¡ç†å™¨

```typescript
class DeviceManager extends EventEmitter {
  private devices: Map<string, DeviceConnection>;
  
  // è¿æ¥è®¾å¤‡
  async connectWeb(url: string): Promise<Device>;
  async connectAndroid(udid: string): Promise<Device>;
  async connectIOS(udid: string): Promise<Device>;
  async connectComputer(): Promise<Device>;
  
  // æ–­å¼€è¿æ¥
  async disconnect(deviceId: string): Promise<void>;
  
  // è·å–è®¾å¤‡åˆ—è¡¨
  getDevices(): Device[];
  getActiveDevice(): Device | null;
  
  // äº‹ä»¶
  on('deviceConnected', (device: Device) => void);
  on('deviceDisconnected', (deviceId: string) => void);
  on('screenshotUpdated', (deviceId: string, screenshot: string) => void);
}
```

### 10.2 è®¾å¤‡é€‚é…å™¨æ¨¡å¼

```typescript
interface DeviceAdapter {
  type: DeviceType;
  connect(config: any): Promise<void>;
  disconnect(): Promise<void>;
  getScreenshot(): Promise<string>;
  execute(action: DeviceAction): Promise<any>;
  getInterfaceInfo(): Promise<InterfaceInfo>;
}

// å„è®¾å¤‡ç±»å‹é€‚é…å™¨
class WebDeviceAdapter implements DeviceAdapter { }
class AndroidDeviceAdapter implements DeviceAdapter { }
class IOSDeviceAdapter implements DeviceAdapter { }
class ComputerDeviceAdapter implements DeviceAdapter { }
```

## 11. ä¸»é¢˜è®¾è®¡

å¤ç”¨ Midscene çš„ä¸»é¢˜å˜é‡ï¼š

```less
// themes/dark.less
:root[data-theme='dark'] {
  --omni-bg-primary: #1a1a1a;
  --omni-bg-secondary: #252525;
  --omni-bg-tertiary: #2d2d2d;
  --omni-text-primary: #ffffff;
  --omni-text-secondary: #a0a0a0;
  --omni-border-color: #3d3d3d;
  --omni-accent-color: #1890ff;
  --omni-success-color: #52c41a;
  --omni-warning-color: #faad14;
  --omni-error-color: #f5222d;
}

// themes/light.less
:root[data-theme='light'] {
  --omni-bg-primary: #ffffff;
  --omni-bg-secondary: #f5f5f5;
  --omni-bg-tertiary: #fafafa;
  --omni-text-primary: #000000;
  --omni-text-secondary: #666666;
  --omni-border-color: #e8e8e8;
  --omni-accent-color: #1890ff;
  --omni-success-color: #52c41a;
  --omni-warning-color: #faad14;
  --omni-error-color: #f5222d;
}
```

## 12. å¿«æ·é”®è®¾è®¡

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Ctrl/Cmd + 1` | åˆ‡æ¢åˆ° Playground |
| `Ctrl/Cmd + 2` | åˆ‡æ¢åˆ° Report |
| `Ctrl/Cmd + 3` | åˆ‡æ¢åˆ° Recorder |
| `Ctrl/Cmd + B` | åˆ‡æ¢å·¦ä¾§è®¾å¤‡é¢æ¿ |
| `Ctrl/Cmd + I` | åˆ‡æ¢å³ä¾§æ£€æŸ¥å™¨é¢æ¿ |
| `Ctrl/Cmd + +` | æ”¾å¤§æˆªå›¾ |
| `Ctrl/Cmd + -` | ç¼©å°æˆªå›¾ |
| `Ctrl/Cmd + 0` | é‡ç½®æˆªå›¾ç¼©æ”¾ |
| `Ctrl/Cmd + Shift + C` | è¿æ¥æ–°è®¾å¤‡ |
| `Ctrl/Cmd + Shift + D` | æ–­å¼€å½“å‰è®¾å¤‡ |
| `Ctrl/Cmd + Enter` | å‘é€æ¶ˆæ¯ï¼ˆPlaygroundï¼‰ |
| `Ctrl/Cmd + R` | å¼€å§‹/åœæ­¢å½•åˆ¶ |

## 13. å®ç°è·¯çº¿å›¾

### Phase 1: åŸºç¡€æ¶æ„
- [ ] æ­å»º Electron + React é¡¹ç›®ç»“æ„
- [ ] é›†æˆ `@midscene/visualizer`
- [ ] å®ç°åŸºç¡€å¸ƒå±€å’Œä¸»é¢˜ç³»ç»Ÿ
- [ ] å®ç°è®¾å¤‡ç®¡ç†å™¨æ¡†æ¶

### Phase 2: æ ¸å¿ƒåŠŸèƒ½
- [ ] å®ç° Web è®¾å¤‡æ”¯æŒ
- [ ] é›†æˆ Playground è§†å›¾
- [ ] é›†æˆ Report è§†å›¾
- [ ] å®ç°å¤šè®¾å¤‡åˆ‡æ¢

### Phase 3: æ‰©å±•åŠŸèƒ½
- [ ] å®ç° Android è®¾å¤‡æ”¯æŒ
- [ ] å®ç° iOS è®¾å¤‡æ”¯æŒ
- [ ] é›†æˆ Recorder åŠŸèƒ½
- [ ] å¿«æ·é”®æ”¯æŒ

### Phase 4: ä¼˜åŒ–å®Œå–„
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] é”™è¯¯å¤„ç†
- [ ] ç”¨æˆ·å¼•å¯¼
- [ ] æ–‡æ¡£å®Œå–„

## 14. å‚è€ƒèµ„æº

- Midscene Visualizer: `references/midscene/packages/visualizer`
- Midscene Report App: `references/midscene/apps/report`
- Midscene Playground: `references/midscene/apps/playground`
- Midscene Chrome Extension: `references/midscene/apps/chrome-extension`
